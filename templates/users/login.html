{% extends "base/base.html" %}
{% load static %}

{% block title %}ورود به حساب کاربری | زیما{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/pages/auth.css' %}">
{% endblock %}

{% block content %}
<section class="auth-section">
    <div class="auth-container">
        <div class="auth-wrapper">
            <div class="auth-form-section">
                <div class="form-header-auth">
                    <h2>خوش آمدید!</h2>
                    <p>برای ادامه وارد حساب کاربری خود شوید.</p>
                </div>
                <form method="post" action="{% url 'users:login' %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="id_username" class="form-label">نام کاربری یا ایمیل:</label>
                        <input type="text" name="username" id="id_username" class="form-input" placeholder="نام کاربری یا ایمیل" required>
                    </div>
                    <div class="form-group">
                        <label for="id_password" class="form-label">رمز عبور:</label>
                        <input type="password" name="password" id="id_password" class="form-input" placeholder="رمز عبور" required>
                        <span class="password-toggle" onclick="togglePasswordVisibility('id_password')">
                            <i class="fas fa-eye"></i>
                        </span>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" name="remember_me" id="id_remember_me" class="form-check-input">
                        <label for="id_remember_me" class="form-check-label">مرا به خاطر بسپار</label>
                    </div>
                    <a href="{% url 'users:password_reset' %}" class="form-link d-block mb-3">رمز عبور خود را فراموش کرده‌اید؟</a>
                    <button type="submit" class="btn-auth">ورود</button>
                </form>
                <div class="social-login">
                    <p>یا با استفاده از:</p>
                    <div class="social-buttons">
                        <a href="#" class="social-btn google"><i class="fab fa-google"></i></a>
                        <a href="#" class="social-btn github"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                <p class="mt-4 text-center">حساب کاربری ندارید؟ <a href="{% url 'users:signup' %}" class="form-link">ثبت نام کنید</a></p>
            </div>
            <div class="auth-welcome">
                <i class="fas fa-gem welcome-icon"></i>
                <h3 class="welcome-title">به زیما خوش آمدید!</h3>
                <p class="welcome-text">
                    با ورود به حساب کاربری خود، به دنیای بی‌نظیر محصولات زیما دسترسی پیدا کنید و از تجربه خریدی آسان و دلنشین لذت ببرید.
                </p>
                <a href="{% url 'users:signup' %}" class="welcome-link">ایجاد حساب جدید</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    function togglePasswordVisibility(fieldId) {
        const field = document.getElementById(fieldId);
        const icon = field.nextElementSibling.querySelector('i'); // assuming icon is next to input
        if (field.type === "password") {
            field.type = "text";
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            field.type = "password";
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }
</script>
{% endblock %}
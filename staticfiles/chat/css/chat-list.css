/* ================================================= */
/* == استایل‌های جدید لیست گفتگو (تم زیما) == */
/* ================================================= */

/* کانتینر اصلی صفحه */
.chat-list-page {
 padding: 140px 0 60px;
 background: linear-gradient(135deg, var(--zima-blush), var(--zima-champagne));
 min-height: 100vh;
 position: relative;
}

.chat-list-page::before {
 content: '';
 position: absolute;
 top: 0; left: 0; right: 0; bottom: 0;
 background: url('/static/images/patterns/subtle-pattern.png') repeat;
 opacity: 0.03;
 pointer-events: none;
}

.chat-list-container {
 max-width: 1000px;
 margin: 0 auto;
 padding: 0 20px;
 position: relative;
 z-index: 2;
 background: white;
 border-radius: 20px;
 box-shadow: 0 10px 40px var(--shadow-soft);
 overflow: hidden;
}

/* هدر لیست گفتگو */
.chat-list-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 25px 30px;
 background: linear-gradient(135deg, var(--zima-blush), var(--zima-champagne));
 border-bottom: 1px solid var(--zima-pearl);
}

.chat-list-header h1 {
 margin: 0;
 font-size: 1.8rem;
 font-weight: 700;
 color: var(--text-color-dark);
 font-family: 'Playfair Display', serif;
}

/* استایل دکمه‌های هدر */
.chat-list-header .btn-zima-primary,
.chat-list-header .btn-zima-secondary {
 padding: 12px 25px;
 font-size: 0.95rem;
 font-weight: 600;
 border: none;
 border-radius: 50px;
 text-decoration: none;
 display: inline-flex;
 align-items: center;
 gap: 8px;
 transition: all 0.4s ease;
}

.chat-list-header .btn-zima-primary {
 background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
 color: white;
 box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
}

.chat-list-header .btn-zima-primary:hover {
 transform: translateY(-2px);
 box-shadow: 0 12px 25px rgba(255, 107, 107, 0.4);
}

.chat-list-header .btn-zima-secondary {
 background: transparent;
 color: var(--text-color-dark);
 border: 2px solid var(--zima-pearl);
}

.chat-list-header .btn-zima-secondary:hover {
 background: white;
 border-color: white;
 transform: translateY(-2px);
}

/* لیست گفتگوها */
.chat-list {
 list-style: none;
 padding: 0;
 margin: 0;
}

.chat-item {
 display: flex;
 align-items: center;
 padding: 20px 30px;
 border-bottom: 1px solid var(--zima-pearl);
 transition: background-color 0.3s ease;
 text-decoration: none;
 color: inherit;
 position: relative;
}

.chat-item:last-child {
 border-bottom: none;
}

.chat-item:hover {
 background-color: var(--zima-blush);
}

.chat-item a { /* استایل لینک داخل آیتم */
 display: flex;
 flex-grow: 1;
 align-items: center;
 text-decoration: none;
 color: inherit;
}

/* آواتار */
.chat-item-avatar {
 width: 55px;
 height: 55px;
 border-radius: 50%;
 overflow: hidden;
 margin-left: 15px;
 background: linear-gradient(135deg, var(--zima-blush), var(--zima-champagne));
 display: flex;
 align-items: center;
 justify-content: center;
 flex-shrink: 0;
 border: 2px solid white;
 box-shadow: 0 2px 5px var(--shadow-soft);
}

.avatar-placeholder {
 font-size: 1.5rem;
 font-weight: 600;
 color: var(--text-color-medium);
}

/* محتوای آیتم */
.chat-item-content {
 flex-grow: 1;
 min-width: 0; /* برای جلوگیری از سرریز شدن متن */
}

.chat-item-header {
 display: flex;
 justify-content: space-between;
 align-items: center;
 margin-bottom: 4px;
}

.chat-item-header h3 {
 margin: 0;
 font-size: 1.1rem;
 font-weight: 600;
 color: var(--text-color-dark);
}

.chat-item-time {
 font-size: 0.8rem;
 color: var(--text-color-medium);
}

.chat-item-details {
 display: flex;
 align-items: center;
 gap: 10px;
 margin-bottom: 4px;
}

/* ✅ ✅ ✅ اصلاح کامل وضعیت آنلاین/آفلاین برای لیست گفتگو ✅ ✅ ✅ */
.chat-list-page .user-status {
 display: inline-block;
 width: 18px;
 height: 18px;
 position: relative;
 border-radius: 50%;
 background-color: transparent;
 margin: 0 5px;
 vertical-align: middle;
}

.chat-list-page .status-dot {
 display: block;
 width: 12px;
 height: 12px;
 border-radius: 50%;
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translate(-50%, -50%);
 transition: all 0.3s ease;
}

.chat-list-page .status-dot.online {
 background-color: #28a745;
 box-shadow: 0 0 0 2px #fff, 0 0 0 4px rgba(40, 167, 69, 0.3), 0 0 7px rgba(40, 167, 69, 0.5);
 animation: pulse-green-list 2s infinite;
}

.chat-list-page .status-dot.offline {
 background-color: #6c757d;
 box-shadow: 0 0 0 2px #fff, 0 0 0 4px rgba(108, 117, 125, 0.2);
}

@keyframes pulse-green-list {
 0% {
 box-shadow: 0 0 0 2px #fff, 0 0 0 4px rgba(40, 167, 69, 0.3), 0 0 7px rgba(40, 167, 69, 0.5);
 }
 50% {
 box-shadow: 0 0 0 2px #fff, 0 0 0 4px rgba(40, 167, 69, 0.5), 0 0 10px rgba(40, 167, 69, 0.7);
 }
 100% {
 box-shadow: 0 0 0 2px #fff, 0 0 0 4px rgba(40, 167, 69, 0.3), 0 0 7px rgba(40, 167, 69, 0.5);
 }
}

/* وضعیت باز/بسته */
.status-badge {
 padding: 4px 12px;
 border-radius: 15px;
 font-size: 0.75rem;
 font-weight: 500;
 background-color: var(--zima-pearl);
 color: var(--text-color-medium);
}

.status-badge.closed {
 background-color: #e9ecef;
 color: #6c757d;
}

/* آخرین پیام */
.chat-item-message {
 font-size: 0.9rem;
 color: var(--text-color-medium);
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
 max-width: 95%; /* برای جا دادن آیکون خوانده شدن */
}

.system-message-preview {
 font-style: italic;
}

.no-message {
 font-style: italic;
 opacity: 0.7;
}

/* نشانگر پیام خوانده نشده */
.chat-item-meta {
 display: flex;
 flex-direction: column;
 align-items: flex-end;
 gap: 8px;
 margin-right: 15px;
 flex-shrink: 0;
}

.unread-room-badge {
 background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
 color: white;
 width: 24px;
 height: 24px;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 0.8rem;
 font-weight: 600;
 box-shadow: 0 2px 5px var(--shadow-medium);
}

/* دکمه حذف */
.delete-chat {
 position: absolute;
 left: 20px;
 top: 50%;
 transform: translateY(-50%);
 color: var(--danger-color);
 opacity: 0;
 transition: all 0.3s ease;
 z-index: 10;
}

.chat-item:hover .delete-chat {
 opacity: 0.7;
}

.delete-chat:hover {
 opacity: 1;
 transform: translateY(-50%) scale(1.1);
}

/* حالت خالی */
.empty-list {
 text-align: center;
 padding: 80px 40px;
 color: var(--text-color-medium);
}
.empty-list i {
 font-size: 4rem;
 color: var(--zima-pearl);
 margin-bottom: 25px;
}
.empty-list p {
 font-size: 1.1rem;
 line-height: 1.6;
 margin-bottom: 30px;
}
.empty-list .btn-zima-primary { /* استایل دکمه در حالت خالی */
 padding: 15px 30px; font-size: 1rem; font-weight: 600;
 border: none; border-radius: 50px; text-decoration: none;
 display: inline-flex; align-items: center; gap: 10px;
 transition: all 0.4s ease;
 background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
 color: white;
 box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
}
.empty-list .btn-zima-primary:hover {
 transform: translateY(-2px);
 box-shadow: 0 12px 25px rgba(255, 107, 107, 0.4);
}

/* واکنش‌گرایی */
@media (max-width: 768px) {
 .chat-list-container {
 border-radius: 0;
 }
 .chat-list-header {
 padding: 20px;
 flex-direction: column;
 gap: 15px;
 align-items: flex-start;
 }
 .chat-item {
 padding: 15px;
 }
 .chat-item-avatar {
 width: 45px;
 height: 45px;
 }
 .chat-item-header h3 {
 font-size: 1rem;
 }
}